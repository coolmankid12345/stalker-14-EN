<controls:FancyWindow xmlns="https://spacestation14.io"
                      xmlns:controls="clr-namespace:Content.Client.UserInterface.Controls"
                      xmlns:radar="clr-namespace:Content.Client._Stalker_EN.Devices.Radar.UI"
                      xmlns:gfx="clr-namespace:Robust.Client.Graphics;assembly=Robust.Client"
                      Title="{Loc 'artifact-radar-window-title'}"
                      MinSize="420 510"
                      SetSize="420 510">
    <BoxContainer Orientation="Vertical" Margin="5">
        <!-- Header Section -->
        <PanelContainer Margin="0 0 0 5">
            <PanelContainer.PanelOverride>
                <gfx:StyleBoxFlat BackgroundColor="#0A150A" BorderColor="#1A3A1A" BorderThickness="1" />
            </PanelContainer.PanelOverride>
            <Label Name="HeaderLabel"
                   HorizontalAlignment="Center"
                   Margin="5"
                   FontColorOverride="#3A8A3A" />
        </PanelContainer>

        <!-- Radar Section -->
        <PanelContainer VerticalExpand="True" Margin="0 0 0 5">
            <PanelContainer.PanelOverride>
                <gfx:StyleBoxFlat BackgroundColor="#050A05" BorderColor="#1A3A1A" BorderThickness="1" />
            </PanelContainer.PanelOverride>
            <radar:RadarControl Name="RadarControl"
                                     HorizontalExpand="True"
                                     VerticalExpand="True"
                                     Margin="5" />
        </PanelContainer>

        <!-- Capability Indicators -->
        <BoxContainer Name="CapabilitiesPanel" Orientation="Horizontal" HorizontalAlignment="Center" Margin="5">
            <Label Text="{Loc 'radar-detects-label'}" Margin="0 0 5 0" />
            <Label Name="ArtifactIndicator" Text="{Loc 'radar-detects-artifacts'}" FontColorOverride="#FFFFFF" />
            <Label Name="SeparatorLabel" Text=" | " Visible="False" />
            <Label Name="AnomalyIndicator" Text="{Loc 'radar-detects-anomalies'}" FontColorOverride="#FFA500" Visible="False" />
        </BoxContainer>

        <!-- Controls Section -->
        <BoxContainer Orientation="Horizontal" HorizontalAlignment="Center" Margin="5">
            <!-- Audio Alert Button - hidden when device lacks ZoneAnomalyDetectorComponent -->
            <Control Name="AnomalyDetectorPanel" Visible="False">
                <ContainerButton Name="AnomalyDetectorButton" StyleClasses="button" MinWidth="160" Margin="5 0 5 0">
                    <BoxContainer Orientation="Horizontal" HorizontalAlignment="Center">
                        <Label Text="{Loc 'radar-label-audio-alert'}" />
                        <Label Name="AnomalyDetectorStateLabel" Margin="4 0 0 0" Text="---" />
                    </BoxContainer>
                </ContainerButton>
            </Control>
            <ContainerButton Name="RadarButton" StyleClasses="button" MinWidth="160" Margin="5 0 5 0">
                <BoxContainer Orientation="Horizontal" HorizontalAlignment="Center">
                    <Label Text="{Loc 'radar-label-radar'}" />
                    <Label Name="RadarStateLabel" Margin="4 0 0 0" Text="---" />
                </BoxContainer>
            </ContainerButton>
        </BoxContainer>

        <!-- Waveform Section -->
        <PanelContainer Name="WaveformPanel" Margin="0 5 0 0" Visible="False">
            <PanelContainer.PanelOverride>
                <gfx:StyleBoxFlat BackgroundColor="#050A05" BorderColor="#1A3A1A" BorderThickness="1" />
            </PanelContainer.PanelOverride>
            <radar:RadarWaveformControl Name="WaveformControl" MinHeight="40" Margin="5" />
        </PanelContainer>
    </BoxContainer>
</controls:FancyWindow>
